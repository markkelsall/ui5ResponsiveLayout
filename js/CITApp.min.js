function CITApp(c,h,e,a,d,b){this.version="1.5";this.sLocalResources=c;this.sViewType=h;this.sPlaceAt=e;this.sAppViewName=a;this.sErrorUri=d;this.bIsMobile=b;this.debugMode="false";this.logLevel="error";this.splitApp=null;this.app=null;this.eao=null;this.messageManager=null;this.navigation=null;this.EAOCollection=[];this.bRetrieveSysProp=false;this.sSysPropUrl="";this.oSysProp=null;var f=this;var g=this.init;setTimeout(function(){g(f)},0);return this}CITApp.prototype.init=function(a){try{a.loadBootstrap();a.retrieveSystemProperties(a,function(){try{a.navigation=new Navigation(a.sViewType);a.checkForLogLevel();a.loadMainView();$(document).ready(function(){})}catch(c){a.handleInitError(c,a)}})}catch(b){a.handleInitError(b,a)}};CITApp.prototype.loadMainView=function(){sap.ui.localResources(this.sLocalResources);try{var c=this.sLocalResources+"."+this.sAppViewName;var a=sap.ui.view({viewName:c,type:"JS"});if(this.sPlaceAt!==null&&this.sPlaceAt!==""){a.placeAt(this.sPlaceAt)}this.getNavigation().setApp(a.getController().app);this.getNavigation().setSplitApp(a.getController().splitApp)}catch(b){Logger.error(b.message);Logger.error(b.stack);throw b}};CITApp.prototype.initialiseMessageManager=function(d){var b=false;try{var a=new MessageManager(d,this.bIsMobile);this.messageManager=a;b=true}catch(c){Logger.error(c.stack);Logger.error(c.message)}return b};CITApp.prototype.checkForLogLevel=function(){var a=$.sap.getUriParameters().get("logLevel");if(a!==null&&a!=="info"&&a!=="warn"&&a!=="debug"){this.logLevel="error"}else{this.logLevel=a}Logger.setLogLevel(this.logLevel)};CITApp.prototype.loadBootstrap=function(){try{$.sap.registerModulePath("js","js");$.sap.require("js.bootstrap");if(bootstrap!==undefined){if(bootstrap.debugMode==="forcedTrue"){this.debugMode=true}else{if(bootstrap.debugMode==="true"){this.checkForDebugMode()}else{if(bootstrap.debugMode==="false"){this.debugMode=false}}}if(bootstrap.retrieveSysProp!==undefined&&(bootstrap.retrieveSysProp===true||bootstrap.retrieveSysProp==="true")&&bootstrap.retrieveSysProp!==undefined&&bootstrap.retrieveSysProp!==""){this.bRetrieveSysProp=true;this.sSysPropUrl=bootstrap.sysPropUrl}if(bootstrap.namespaces!==undefined){for(var a=0;a<bootstrap.namespaces.length;a++){var b=bootstrap.namespaces[a];$.sap.registerModulePath(b.nameSpace,b.filesLocation);if(b.registerCaching){sap.ui.core.AppCacheBuster.register(b.filesLocation)}}}if(bootstrap.cssFiles!==undefined){for(var a=0;a<bootstrap.cssFiles.length;a++){var b=bootstrap.cssFiles[a];$.sap.includeStyleSheet(b)}}if(bootstrap.jsFiles!==undefined){for(var a=0;a<bootstrap.jsFiles.length;a++){var b=bootstrap.jsFiles[a];if(this.debugMode){$.sap.require(b)}else{$.sap.require(b+"-min")}}}if(bootstrap.eaoEndpoints!==undefined){sap.ui.getCore().setModel(new sap.ui.model.json.JSONModel(bootstrap.eaoEndpoints),"eaoBootstrap")}}}catch(c){console.error("Could not load bootstrap configuration. Because ; "+c.stack)}};CITApp.prototype.checkForDebugMode=function(){var a=$.sap.getUriParameters().get("debug");if(a===null){this.debugMode=false}else{if(a==="true"){this.debugMode=true}else{this.debugMode=false}}};CITApp.prototype.initialiseEAO=function(b,d,a,c){var f=false;try{var h=new EAO(b,d,a,c);this.eao=h;f=true}catch(g){Logger.error(g.stack);Logger.error(g.message)}return f};CITApp.prototype.getEAO=function(a){var h=this.EAOCollection;var f=this.oSysProp;var b=false;var c=null;$(h).each(function(j){if(h[j].name===a){b=true;c=h[j].eao}});if(!b){var i=sap.ui.getCore().getModel("eaoBootstrap").getData();for(var g=0;g<i.length;g++){if(i[g].name===a){var e=i[g];if(e.sysProp!==undefined&&e.sysProp){var d=f[e.name];c=new EAO(d,i[g].bJson,null,null,this.bIsMobile);e.eao=c;h.push(e)}else{c=new EAO(i[g].URI,i[g].bJson,null,null,this.bIsMobile);e.eao=c;h.push(e)}}}}return c};CITApp.prototype.getMessageManager=function(){return this.messageManager};CITApp.prototype.getNavigation=function(){return this.navigation};CITApp.prototype.handleInitError=function(b,a){try{if(console!==undefined&&console.error!==undefined){console.error(b.message);console.error(b.stack)}else{alert("Error message: "+b.message);alert("Error stack: "+b.stack)}if(localStorage!==undefined&&localStorage.setItem!==undefined){localStorage.setItem("errorMessage",b.message);localStorage.setItem("errorStack",b.stack);document.body.innerHTML='<object type="text/html" data="'+a.sErrorUri+'" style="width:100%; height:100% !important;"></object>';document.body.className="";document.body.style.height="100%";document.getElementsByTagName("html")[0].className=""}else{alert("A fatal error occurred when loading the application. Message: "+c.message)}}catch(c){alert("[E3270959] There was a fatal error when loading the application.");alert("[E3870959] Original error: "+b.message);alert("[E3870959] Resulting error: "+c.message)}};CITApp.prototype.retrieveSystemProperties=function(a,b){if(!this.bRetrieveSysProp){b()}else{$.ajax({url:a.sSysPropUrl,method:"POST",dataType:"json"}).done(function(d,g,c){if(g!==null&&g==="success"){if(d!==null){a.oSysProp=d;b()}}else{var f={};f.message="Failed response when retrieving system properties";f.stack="";a.handleInitError(f,a)}}).fail(function(c,e,d){a.handleInitError(d,a)})}};CITApp.prototype.getSystemProperties=function(){return this.oSysProp};CITApp.prototype.setSystemProperties=function(a){this.oSysProp=a};